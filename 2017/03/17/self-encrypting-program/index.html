<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Self encrypting program - Marek Narozniak</title>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="/2017/03/17/self-encrypting-program/">
  <link rel="alternate" type="application/rss+xml" title="Marek Narozniak" href="/feed.xml">
</head>

  <body>
    <div class="page-content">
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <span class="back">&larr; <a href="/">Index</a></span>
    <h1 class="post-title" itemprop="name headline">Self encrypting program</h1>
    <p class="post-meta">
      <time datetime="2017-03-17T00:00:00+08:00" itemprop="datePublished">Mar 17, 2017</time>
      

      
  		

  		
  		

  		•	<span class="tags" itemprop="tags">
  				
  				
  				<a href="/tagged#ideas">#Ideas</a>
  			<a href="/tagged#fun">#Fun</a>
  			<a href="/tagged#python">#Python</a>
  			</span>

  	  

    </p>
  </header>
  <div class="post-content" itemprop="articleBody">
    <h2 id="motivation">Motivation</h2>

<p>I carry around a lot of homemade software, I have it on my USB stick, I send it to myself via email or keep it in my Google Drive or Amazon Drive.</p>

<p>Most of them are little command line tools I prepare for various purposes such as sending or reading messages, logging information, synchronizing it etc. They often require to hold credentials, private PGP keys and other things you wouldn’t like to be found by a third party.</p>

<p>This kind of tool rarely requires lot of storage space, but data it saves is highly confidential, also those are little projects, can fit in single file, saving data in the same file (yes! in the source file!) was very tempting thing I wanted to try for a long time!</p>

<h2 id="captains-log">Captain’s log</h2>

<p>Every Starfleet Captain knows that if his ship will be captured by Romulans somewhere in Neutral Zone, if not destroyed they will search it for all possible information about United Federation of Planets, they will also search out computers memory. Captain’s log must be stored in encrypted form so that if someone captures the computer it will not be possible to know anything about ship’s mission.</p>

<h3 id="how-it-works">How it works?</h3>

<h3 id="kernel-source-code">Kernel source code</h3>

<p>By kernel I named the main functionality of the application. Kernel is supposed to store it’s own data in <code class="highlighter-rouge">state</code> variable which is pure text.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="p">:</span>
    <span class="kn">import</span> <span class="nn">time</span>
    <span class="k">print</span> <span class="s">'  Welcome to secure Captain</span><span class="se">\'</span><span class="s">s log, type help'</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">'&gt; '</span><span class="p">)</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">cmd</span> <span class="o">!=</span> <span class="s">'exit'</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s">'help'</span> <span class="p">:</span>
            <span class="k">print</span> <span class="s">'  help   - this screen</span><span class="se">\n</span><span class="s">  add    - insert a new note</span><span class="se">\n</span><span class="s">  log    - read previous notes</span><span class="se">\n</span><span class="s">  exit   - leave starfleet captain</span><span class="se">\'</span><span class="s">s log'</span>
        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s">'add'</span> <span class="p">:</span>
            <span class="n">new</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">'&lt; '</span><span class="p">)</span>
            <span class="n">state</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span> <span class="o">+</span> <span class="s">' '</span> <span class="o">+</span> <span class="n">new</span> <span class="o">+</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span>
        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s">'log'</span> <span class="p">:</span>
            <span class="k">print</span> <span class="s">'stardate      message'</span>
            <span class="k">print</span> <span class="n">state</span>
        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s">'exit'</span> <span class="p">:</span>
            <span class="k">return</span> <span class="n">state</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">'&gt; '</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="build-script-source-code">Build script source code</h3>

<p>The purpose of build script is to initiate the secure application, set the password and encrypt initial data as well as the source code.</p>

<h3 id="end-result">End result</h3>

<h2 id="to-do">To do</h2>

<ul>
  <li>mention pure python packages</li>
  <li>mention possibility of combining them into single source using stickytape module</li>
  <li>mention obfuscating</li>
</ul>

<h2 id="security-disclaimer">Security disclaimer</h2>

<p>The purpose of this article is purely educational. Software such as one described in this example still holds many potential security vulnerabilities and I do not take any responsibility for consequences of using it.</p>


    <p>[<a href="#top">Back to Top</a>]</p>
  </div>
  

</article>

    </div>
    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-93578712-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
